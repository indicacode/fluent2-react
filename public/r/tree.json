{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "tree",
  "title": "Tree",
  "description": "Fluent2Tailwind Tree component.",
  "dependencies": [
    "lucide-react",
    "react",
    "tailwind-variants"
  ],
  "files": [
    {
      "path": "registry/fluent2tailwind/tree/tree.styles.ts",
      "content": "import { tv } from \"tailwind-variants\"\n\nexport const treeSlots = tv({\n  slots: {\n    root: \"flex flex-col gap-1\",\n    item: \"flex flex-col\",\n    row: \"flex items-center gap-2 rounded-md px-2 py-1 text-sm\",\n    expand: \"h-5 w-5 shrink-0 text-muted-foreground\",\n    content: \"flex min-w-0 flex-1 items-center gap-2\",\n    aside: \"ml-auto text-xs text-muted-foreground\",\n    actions: \"ml-2 flex items-center gap-1\",\n  },\n  variants: {\n    size: {\n      small: { row: \"text-xs\", expand: \"h-4 w-4\" },\n      medium: { row: \"text-sm\", expand: \"h-5 w-5\" },\n    },\n    appearance: {\n      subtle: { row: \"hover:bg-muted\" },\n      transparent: { row: \"hover:bg-transparent\" },\n    },\n    selected: {\n      true: { row: \"bg-primary/10 text-primary\" },\n    },\n  },\n  defaultVariants: {\n    size: \"medium\",\n    appearance: \"subtle\",\n  },\n})\n\nexport const treeStyles = treeSlots()\n",
      "type": "registry:lib"
    },
    {
      "path": "registry/fluent2tailwind/tree/tree.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { ChevronRight } from \"lucide-react\"\nimport { VariantProps } from \"tailwind-variants\"\n\nimport { treeSlots, treeStyles } from \"./tree.styles\"\n\nconst { root, item, row, expand, content, aside, actions } = treeStyles\n\ntype TreeContextValue = {\n  openItems: string[]\n  toggleOpen: (value: string) => void\n  size?: \"small\" | \"medium\"\n  appearance?: \"subtle\" | \"transparent\"\n  selectedItems: string[]\n  toggleSelect: (value: string) => void\n  selectionMode?: \"none\" | \"single\" | \"multiselect\"\n}\n\nconst TreeContext = React.createContext<TreeContextValue | null>(null)\n\nexport type TreeProps = React.ComponentProps<\"ul\"> &\n  VariantProps<typeof treeSlots> & {\n    openItems?: string[]\n    defaultOpenItems?: string[]\n    onOpenChange?: (items: string[]) => void\n    selectionMode?: \"none\" | \"single\" | \"multiselect\"\n    selectedItems?: string[]\n    defaultSelectedItems?: string[]\n    onSelectionChange?: (items: string[]) => void\n  }\n\nfunction Tree({\n  openItems,\n  defaultOpenItems,\n  onOpenChange,\n  selectedItems,\n  defaultSelectedItems,\n  onSelectionChange,\n  selectionMode = \"none\",\n  size,\n  appearance,\n  className,\n  children,\n  ...props\n}: TreeProps) {\n  const isControlled = openItems !== undefined\n  const [internalOpen, setInternalOpen] = React.useState(defaultOpenItems ?? [])\n  const currentOpen = isControlled ? openItems! : internalOpen\n\n  const isSelectionControlled = selectedItems !== undefined\n  const [internalSelected, setInternalSelected] = React.useState(\n    defaultSelectedItems ?? []\n  )\n  const currentSelected = isSelectionControlled ? selectedItems! : internalSelected\n\n  function toggleOpen(value: string) {\n    const next = currentOpen.includes(value)\n      ? currentOpen.filter((item) => item !== value)\n      : [...currentOpen, value]\n\n    if (!isControlled) setInternalOpen(next)\n    onOpenChange?.(next)\n  }\n\n  function toggleSelect(value: string) {\n    if (selectionMode === \"none\") return\n\n    let next: string[] = []\n    if (selectionMode === \"single\") {\n      next = [value]\n    } else {\n      next = currentSelected.includes(value)\n        ? currentSelected.filter((item) => item !== value)\n        : [...currentSelected, value]\n    }\n\n    if (!isSelectionControlled) setInternalSelected(next)\n    onSelectionChange?.(next)\n  }\n\n  return (\n    <TreeContext.Provider\n      value={{\n        openItems: currentOpen,\n        toggleOpen,\n        size,\n        appearance,\n        selectionMode,\n        selectedItems: currentSelected,\n        toggleSelect,\n      }}\n    >\n      <ul data-slot=\"tree\" className={root({ size, appearance, className })} {...props}>\n        {children}\n      </ul>\n    </TreeContext.Provider>\n  )\n}\n\nexport type TreeItemProps = React.ComponentProps<\"li\"> & {\n  value: string\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n  itemType?: \"branch\" | \"leaf\"\n  expandIcon?: React.ReactNode\n}\n\nfunction TreeItem({\n  value,\n  defaultOpen,\n  open,\n  onOpenChange,\n  itemType,\n  expandIcon,\n  className,\n  children,\n  ...props\n}: TreeItemProps) {\n  const context = React.useContext(TreeContext)\n  const isControlled = open !== undefined\n  const [internalOpen, setInternalOpen] = React.useState(defaultOpen ?? false)\n  const isOpen = isControlled\n    ? open!\n    : context?.openItems.includes(value) ?? internalOpen\n\n  const isBranch = itemType === \"branch\" || React.Children.count(children) > 1\n\n  function toggle() {\n    const next = !isOpen\n    if (!isControlled) setInternalOpen(next)\n    onOpenChange?.(next)\n    if (!isControlled) context?.toggleOpen(value)\n  }\n\n  const allChildren = React.Children.toArray(children)\n  const layoutChild = allChildren[0]\n  const nestedChildren = allChildren.slice(1)\n\n  return (\n    <li data-slot=\"tree-item\" className={item({ className })} {...props}>\n      {React.isValidElement(layoutChild)\n        ? React.cloneElement(layoutChild as React.ReactElement, {\n            \"data-tree-item\": value,\n            onClick: () => {\n              if (isBranch) toggle()\n              context?.toggleSelect(value)\n            },\n            expandIcon,\n            isBranch,\n            isOpen,\n          })\n        : layoutChild}\n      {isBranch && isOpen && nestedChildren.length > 0 && (\n        <ul className=\"ml-4 flex flex-col gap-1\">\n          {nestedChildren}\n        </ul>\n      )}\n    </li>\n  )\n}\n\nexport type TreeItemLayoutProps = React.ComponentProps<\"div\"> & {\n  iconBefore?: React.ReactNode\n  iconAfter?: React.ReactNode\n  aside?: React.ReactNode\n  actions?: React.ReactNode\n  expandIcon?: React.ReactNode\n  isBranch?: boolean\n  isOpen?: boolean\n}\n\nfunction TreeItemLayout({\n  className,\n  iconBefore,\n  iconAfter,\n  aside: asideContent,\n  actions: actionsContent,\n  expandIcon,\n  isBranch,\n  isOpen,\n  children,\n  ...props\n}: TreeItemLayoutProps) {\n  const context = React.useContext(TreeContext)\n\n  return (\n    <div\n      data-slot=\"tree-item-layout\"\n      className={row({\n        size: context?.size,\n        appearance: context?.appearance,\n        selected: context?.selectedItems.includes(props[\"data-tree-item\"]),\n        className,\n      })}\n      {...props}\n    >\n      {isBranch && (\n        <span className={expand({ size: context?.size })}>\n          {expandIcon ?? (\n            <ChevronRight className={isOpen ? \"rotate-90\" : \"\"} />\n          )}\n        </span>\n      )}\n      {iconBefore}\n      <span className={content()}>{children}</span>\n      {iconAfter}\n      {asideContent && <span className={aside()}>{asideContent}</span>}\n      {actionsContent && <span className={actions()}>{actionsContent}</span>}\n    </div>\n  )\n}\n\nexport type TreeItemPersonaLayoutProps = TreeItemLayoutProps & {\n  media?: React.ReactNode\n  secondaryText?: React.ReactNode\n}\n\nfunction TreeItemPersonaLayout({\n  media,\n  secondaryText,\n  children,\n  ...props\n}: TreeItemPersonaLayoutProps) {\n  return (\n    <TreeItemLayout\n      {...props}\n      iconBefore={media}\n      aside={secondaryText}\n    >\n      {children}\n    </TreeItemLayout>\n  )\n}\n\nexport type FlatTreeItem = {\n  value: string\n  label: React.ReactNode\n  children?: FlatTreeItem[]\n}\n\nexport type FlatTreeProps = Omit<TreeProps, \"children\"> & {\n  items: FlatTreeItem[]\n  renderItem?: (item: FlatTreeItem) => React.ReactNode\n}\n\nfunction FlatTree({ items, renderItem, ...props }: FlatTreeProps) {\n  function renderItems(list: FlatTreeItem[]) {\n    return list.map((item) => (\n      <TreeItem key={item.value} value={item.value} itemType={item.children?.length ? \"branch\" : \"leaf\"}>\n        {renderItem ? (\n          renderItem(item)\n        ) : (\n          <TreeItemLayout>{item.label}</TreeItemLayout>\n        )}\n        {item.children ? renderItems(item.children) : null}\n      </TreeItem>\n    ))\n  }\n\n  return <Tree {...props}>{renderItems(items)}</Tree>\n}\n\nexport function useHeadlessFlatTree({\n  items,\n  defaultOpenItems,\n  openItems,\n  onOpenChange,\n}: {\n  items: FlatTreeItem[]\n  defaultOpenItems?: string[]\n  openItems?: string[]\n  onOpenChange?: (items: string[]) => void\n}) {\n  const [internalOpen, setInternalOpen] = React.useState(defaultOpenItems ?? [])\n  const currentOpen = openItems ?? internalOpen\n\n  function toggleOpen(value: string) {\n    const next = currentOpen.includes(value)\n      ? currentOpen.filter((item) => item !== value)\n      : [...currentOpen, value]\n\n    if (!openItems) setInternalOpen(next)\n    onOpenChange?.(next)\n  }\n\n  return {\n    items,\n    openItems: currentOpen,\n    toggleOpen,\n  }\n}\n\nexport {\n  Tree,\n  TreeItem,\n  TreeItemLayout,\n  TreeItemPersonaLayout,\n  FlatTree,\n}\n",
      "type": "registry:component"
    }
  ],
  "type": "registry:component"
}