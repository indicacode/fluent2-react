{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "dropdown",
  "title": "Dropdown",
  "description": "Fluent2Tailwind Dropdown component.",
  "dependencies": [
    "@radix-ui/react-popover",
    "react",
    "react-icons",
    "tailwind-variants"
  ],
  "files": [
    {
      "path": "registry/fluent2tailwind/dropdown/dropdown.styles.ts",
      "content": "import { tv } from \"tailwind-variants\"\n\nexport const dropdownVariants = tv({\n  variants: {\n    size: {\n      small: \"px-2 py-1 text-sm\",\n      medium: \"px-3 py-2 text-base\",\n      large: \"px-5 py-3 text-xl\",\n    },\n    disabled: {\n      true: \"cursor-not-allowed opacity-50\",\n      false: \"hover:cursor-pointer\",\n    },\n    appearance: {\n      outline: \"border border-border\",\n      underline: \"\",\n      \"filled-darker\": \"bg-muted\",\n      \"filled-lighter\": \"bg-background\",\n      \"filled-darker-shadow\": \"bg-muted shadow-2xl\",\n      \"filled-lighter-shadow\": \"bg-background shadow-2xl\",\n    },\n  },\n  defaultVariants: { size: \"medium\", appearance: \"outline\" },\n})\n",
      "type": "registry:lib"
    },
    {
      "path": "registry/fluent2tailwind/dropdown/dropdown.tsx",
      "content": "\"use client\"\n\nimport {\n  Command,\n  CommandGroup,\n  CommandItem,\n} from \"@/registry/fluent2tailwind/command/command\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\nimport * as React from \"react\"\nimport { FaCheck } from \"react-icons/fa\"\nimport { PiCaretDown, PiCheck, PiX } from \"react-icons/pi\"\nimport { dropdownVariants } from \"./dropdown.styles\"\n\ntype DropdownVariantProps = Parameters<typeof dropdownVariants>[0]\n\ntype DropdownProps = Omit<React.InputHTMLAttributes<HTMLInputElement>, \"size\"> &\n  DropdownVariantProps & {\n    onOptionSelect?: (option: string[]) => void\n    onOpenChange?: (open: boolean) => void\n  multiselect?: boolean\n  defaultSelectedOptions?: string[]\n  selectedOptions?: string[]\n  appearance?: \"outline\" | \"underline\" | \"filled-darker\" | \"filled-lighter\"\n  clearable?: boolean\n  showClearButton?: boolean\n  defaultOpen?: boolean\n  disableAutoFocus?: boolean\n  inlinePopup?: boolean\n  size?: \"small\" | \"medium\" | \"large\"\n  placeholder?: string\n  placeholderVisible?: boolean\n  activeDescendantController?: string\n  open?: boolean\n}\n\nfunction Dropdown({\n  defaultValue = \"\",\n  className,\n  children,\n  placeholder = \"Select an option\",\n  appearance = \"outline\",\n  disabled = false,\n  size = \"medium\",\n  multiselect = false,\n  clearable = false,\n  showClearButton,\n  defaultSelectedOptions = [],\n  selectedOptions,\n  defaultOpen = false,\n  open: controlledOpen,\n  onOptionSelect,\n  onOpenChange,\n  inlinePopup = false,\n  placeholderVisible = true,\n  activeDescendantController,\n  ...props\n}: DropdownProps) {\n  const isOpenControlled = controlledOpen !== undefined\n  const isSelectionControlled = selectedOptions !== undefined\n\n  const [open, setOpen] = React.useState<boolean>(\n    isOpenControlled ? controlledOpen : defaultOpen\n  )\n  const [value, setValue] = React.useState<string[]>(() => {\n    if (isSelectionControlled) return selectedOptions ?? []\n    if (defaultSelectedOptions.length > 0) return defaultSelectedOptions\n    return defaultValue ? [String(defaultValue)] : []\n  })\n\n  const isMultiselect = multiselect\n\n  React.useEffect(() => {\n    if (isOpenControlled) {\n      setOpen(controlledOpen)\n    }\n  }, [controlledOpen, isOpenControlled])\n\n  React.useEffect(() => {\n    if (isSelectionControlled) {\n      setValue(selectedOptions ?? [])\n    }\n  }, [isSelectionControlled, selectedOptions])\n\n  function handleOpenChange(nextOpen: boolean) {\n    if (!isOpenControlled) {\n      setOpen(nextOpen)\n    }\n    onOpenChange?.(nextOpen)\n  }\n\n  function handleValueChange(nextValue: string[]) {\n    if (!isSelectionControlled) {\n      setValue(nextValue)\n    }\n    onOptionSelect?.(nextValue)\n  }\n\n  const childrenWithProps = React.Children.map(children, (child) => {\n    if (React.isValidElement<OptionProps>(child)) {\n      return React.cloneElement(child, {\n        setValue: handleValueChange,\n        setOpen: handleOpenChange,\n        isMultiSelect: isMultiselect,\n        selectedValue: value,\n      })\n    }\n    return child\n  })\n\n  const resolvedShowClearButton = showClearButton ?? clearable\n  const displayText =\n    value.length > 0\n      ? value.join(\", \")\n      : placeholderVisible\n        ? placeholder\n        : \"\"\n\n  return (\n    <PopoverPrimitive.Root open={open} onOpenChange={handleOpenChange}>\n      <PopoverPrimitive.Trigger asChild disabled={disabled}>\n        <button\n          role=\"combobox\"\n          aria-expanded={open}\n          aria-activedescendant={activeDescendantController}\n          className={\n            dropdownVariants({ appearance, disabled, size }) +\n            ` relative z-10 flex w-full items-center justify-between gap-2 rounded-md ${value.length > 0 ? \"text-muted-foreground\" : \" text-muted-foreground\"} ${!placeholder ? \" h-10\" : \"\"}` +\n            className\n          }\n        >\n          <span className=\"max-w-full truncate text-start\">{displayText}</span>\n          <div\n            className={`absolute bottom-0 left-0 z-30 h-[1px] w-full bg-border`}\n          />\n          <div\n            className={`bg-primary absolute bottom-0 z-30 h-[2px] transition-all ${\n              open ? \"left-0 w-full\" : \"left-1/2 w-0\"\n            }`}\n          />\n          {resolvedShowClearButton && !multiselect && value.length > 0 && (\n            <div\n              onClick={(e) => {\n                e.stopPropagation()\n                handleOpenChange(false)\n                handleValueChange([])\n              }}\n              className=\"absolute right-3 z-[999] text-foreground\"\n            >\n              <PiX />\n            </div>\n          )}\n          {(!clearable || value.length === 0 || multiselect) && (\n            <PiCaretDown\n              className={`z-[999] ml-2 shrink-0 ${disabled ? \"text-muted-foreground\" : \"text-foreground\"}`}\n            />\n          )}\n        </button>\n      </PopoverPrimitive.Trigger>\n\n      {inlinePopup ? (\n        <PopoverPrimitive.Content\n          align=\"start\"\n          sideOffset={4}\n          className=\"z-50 w-[var(--radix-popper-anchor-width)] p-0\"\n        >\n          <Command className=\"rounded-md bg-background px-1 py-1 shadow-xl\">\n            <CommandGroup>{childrenWithProps}</CommandGroup>\n          </Command>\n        </PopoverPrimitive.Content>\n      ) : (\n        <PopoverPrimitive.Portal>\n          <PopoverPrimitive.Content\n            align=\"start\"\n            sideOffset={4}\n            className=\"z-50 w-[var(--radix-popper-anchor-width)] p-0\"\n          >\n            <Command className=\"rounded-md bg-background px-1 py-1 shadow-xl\">\n              <CommandGroup>{childrenWithProps}</CommandGroup>\n            </Command>\n          </PopoverPrimitive.Content>\n        </PopoverPrimitive.Portal>\n      )}\n    </PopoverPrimitive.Root>\n  )\n}\n\ntype OptionProps = {\n  disabled?: boolean\n  value?: string\n  text?: string\n  setValue?: (value: string[]) => void\n  setOpen?: (open: boolean) => void\n  selectedValue?: string[]\n  isMultiSelect?: boolean\n  children?: React.ReactNode\n}\n\nfunction Option({\n  disabled = false,\n  value,\n  text,\n  children,\n  setValue,\n  setOpen,\n  selectedValue = [],\n  isMultiSelect,\n}: OptionProps) {\n  const string = value || text || children?.toString() || \"\"\n\n  const isSelected = selectedValue.includes(string)\n\n  return (\n    <CommandItem\n      key={string}\n      value={string}\n      onSelect={() => {\n        if (disabled) return\n        if (isMultiSelect) {\n          if (isSelected) {\n            setValue?.(selectedValue.filter((v) => v !== string))\n          } else {\n            setValue?.([...selectedValue, string])\n          }\n        } else {\n          setValue?.([string])\n          setOpen?.(false)\n        }\n      }}\n      className={`relative flex items-center justify-start gap-2 px-8 py-2 hover:cursor-pointer ${\n        disabled ? \"text-muted-foreground\" : \"text-foreground hover:bg-muted\"\n      }`}\n    >\n      {isMultiSelect ? (\n        <div\n          className={`absolute left-2 flex max-h-4 min-h-4 max-w-4 min-w-4 items-center justify-center rounded-xs border border-border p-1 text-sm text-primary-foreground shadow-sm dark:border-border ${\n            isSelected ? \"bg-primary\" : \"\"\n          }`}\n        >\n          {isSelected && <FaCheck className=\"max-h-2 max-w-2\" />}\n        </div>\n      ) : (\n        isSelected &&\n        !isMultiSelect && (\n          <PiCheck className=\"absolute left-2 h-4 w-4 text-wrap text-foreground\" />\n        )\n      )}\n      <span className=\"text-wrap\">{children || text || string}</span>\n    </CommandItem>\n  )\n}\n\ntype OptionGroupProps = {\n  label?: string\n  children?: React.ReactNode\n  setValue?: (value: string[]) => void\n  setOpen?: (open: boolean) => void\n  selectedValue?: string[]\n}\n\nfunction OptionGroup({\n  label,\n  setValue,\n  setOpen,\n  selectedValue: value,\n  children,\n}: OptionGroupProps) {\n  const heading = label?.toString() || \"Options\"\n  const childrenWithProps = React.Children.map(children, (child) => {\n    if (React.isValidElement<OptionProps>(child)) {\n      return React.cloneElement(child, {\n        setValue,\n        setOpen,\n        selectedValue: value,\n      })\n    }\n    return child\n  })\n  return <CommandGroup heading={heading}>{childrenWithProps}</CommandGroup>\n}\n\nexport { Dropdown, Option, OptionGroup }\n",
      "type": "registry:component"
    }
  ],
  "type": "registry:component"
}